<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="author" content="Richard">
    <title>Google Drive</title>
    <script type="text/javascript">
    function init() {
        //載入完畢後，偵測使用者授權狀態, OAuth2.0 client ID
        gapi.auth.authorize({
            //OAUTH2.0 client ID
            'client_id': '175100031166-s8qrbs2aig952hkfbctkst1dd4c47hbs.apps.googleusercontent.com',
            //授權總類
            'scope': 'https://www.googleapis.com/auth/drive',
            //偵測還是鼓勵? true: 偵測狀態 , false: 鼓勵授權
            'immediate': true
        }, handleAuthResult);
    }

    function handleAuthResult(authResult) {
        var main = document.getElementById("main");
        var login = document.getElementById("login");
        main.style.display = "none";
        login.style.display = "none";
        if (authResult && !authResult.error) { //已授權
            main.style.display = "block";
        } else { //未授權
            login.style.display = "block";
        }
    }

    function logindrive() {
        //載入完畢後，偵測使用者授權狀態, OAuth2.0 client ID
        gapi.auth.authorize({
            //OAUTH2.0 client ID
            'client_id': '175100031166-s8qrbs2aig952hkfbctkst1dd4c47hbs.apps.googleusercontent.com',
            //授權總類
            'scope': 'https://www.googleapis.com/auth/drive',
            //偵測還是鼓勵? true: 偵測狀態 , false: 鼓勵授權
            'immediate': false
        }, handleAuthResult);
    }
    </script>
    <script src="https://apis.google.com/js/client.js?onload=init"></script>
</head>

<body>
    <div id="login" style="display: none;">
        <button onclick="logindrive();">Login</button>
    </div>
    <div id="main" style="display: none;">
        Hello
    </div>
</body>

</html>
